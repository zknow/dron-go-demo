#https://docs.drone.io/pipeline/docker/syntax/trigger/

#drone.yml
kind: pipeline
type: docker
name: default

trigger:
  branch:
    - main
    - master
    - feature/*
  event:
    - push
    - pull_request
    - tag

steps:
  - name: build
    image: docker:latest
    commands:
      - docker-compose -f ./docker-compose.yml build

  - name: deploy
    image: docker:latest
    commands:
      - docker-compose -f ./docker-compose.yml up -d
    when:
      status:
        - success